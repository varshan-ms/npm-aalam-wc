System.register(["./index-legacy.js","./assets/state-legacy-D2lZ0iuY.js","./assets/query-legacy-CILVpPJY.js","./assets/map-legacy-CwlZ3H7X.js","./assets/style-map-legacy-ZuJKoPGU.js","./assets/utils-legacy-1NLZUWf7.js","./assets/base-legacy-ClOgP1kU.js"],(function(t,e){"use strict";var i,s,o,n,h,r,_,l,a,p,u,d,m;return{setters:[t=>{i=t.n,s=t.t,o=t.s,n=t.x,h=t.i},t=>{r=t.r},t=>{_=t.e},t=>{l=t.o},t=>{a=t.o},t=>{p=t.g,u=t.p,d=t.a,m=t.b},null],execute:function(){var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,c=(i,s,o,n)=>{for(var h,r=n>1?void 0:n?e(s,o):s,_=i.length-1;_>=0;_--)(h=i[_])&&(r=(n?h(s,o,r):h(r))||r);return n&&r&&t(s,o,r),r};const b=[],w={bottom:{bottom:0,right:0,left:0,position:"absolute","max-height":"100vh"},top:{top:0,right:0,left:0,position:"absolute","max-height":"100vh"},right:{top:0,bottom:0,right:0,position:"absolute"},left:{top:0,bottom:0,left:0,position:"absolute"},center:{position:"relative"},"top-center":{top:0,position:"absolute","max-height":"100vh"},"bottom-center":{bottom:0,position:"absolute","max-height":"100vh"},"top-left":{top:0,left:0,position:"absolute","max-height":"100vh"},"top-right":{top:0,right:0,position:"absolute","max-height":"100vh"},"bottom-left":{bottom:0,left:0,position:"absolute","max-height":"100vh"},"bottom-right":{bottom:0,right:0,position:"absolute","max-height":"100vh"},full:{top:0,bottom:0,right:0,left:0,position:"absolute"}};let y=class extends o{constructor(){super(),this.DEFAULT_VALUES={bgcolor:"rgba(0,0,0,0.6)",pos:"xs:bottom;m:top-center",height:"xs:50vh;m:auto",width:"xs:100%;m:50vw",animation:"xs:b2t",position_breakpoints:[{cond:"(min-width:0px) and (max-width:992px)",val:"bottom",ll:0,ul:992},{cond:"(min-width:992px)",val:"top-center",ll:993}],height_breakpoints:[{cond:"(min-width:0px) and (max-width:992px)",val:"50vh"},{cond:"(min-width:992px)",val:"auto"}],width_breakpoints:[{cond:"(min-width:0px) and (max-width:992px)",val:"100%"},{cond:"(min-width:992px)",val:"50vw"}],animate_breakpoints:[{cond:"(min-width:0px)",val:"b2t",ul:null,ll:0}]},this.open=!1,this.bgcolor=this.DEFAULT_VALUES.bgcolor,this.noesc=!1,this.nobgclose=!1,this.stack=!1,this.guidesel=null,this.pos=this.DEFAULT_VALUES.pos,this.height=this.DEFAULT_VALUES.height,this.width=this.DEFAULT_VALUES.width,this.animation=this.DEFAULT_VALUES.animation,this.closesel="",this.animationDur=300,this._open=!1,this._position_breakpoints=this.DEFAULT_VALUES.position_breakpoints,this._height_breakpoints=this.DEFAULT_VALUES.height_breakpoints,this._width_breakpoints=this.DEFAULT_VALUES.width_breakpoints,this._animate_breakpoints=this.DEFAULT_VALUES.animate_breakpoints,this._guide_value={},this._timer_obj=null,this._key_listener=this._handleKey.bind(this),this._resize_listener=this._resizeEvent.bind(this),this._clamp_values={}}attributeChangedCallback(t,e,i){if(super.attributeChangedCallback(t,e,i),"open"==t)requestAnimationFrame((()=>{this.open?this.show():this.hide()}));else if("height"==t)this._height_breakpoints=p(i,this.DEFAULT_VALUES.height,(t=>{try{return CSSStyleValue.parse("height",t),!0}catch(e){}return!1}));else if("width"==t)this._width_breakpoints=p(i,this.DEFAULT_VALUES.width,(t=>{try{return CSSStyleValue.parse("width",t),!0}catch(e){}return!1}));else if("pos"==t)this._position_breakpoints=p(i,this.DEFAULT_VALUES.pos,(t=>w[t]));else if("animation"==t)this._animate_breakpoints=p(i,this.DEFAULT_VALUES.animation,(t=>m[t]));else if("guidesel"==t){let t=u(i);for(let e in t){if(t[e].includes(",")){let i=t[e].split(",");if(t[e]=i[0],"edge"==i[1])this._clamp_values[e]=0;else{let t=+i[1];!isNaN(t)&&t<=20&&t>=0&&(this._clamp_values[e]=t)}}this._guide_value[t[e]]=e}}}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this._resize_listener),document.addEventListener("keydown",this._key_listener)}disconnectedCallback(){super.disconnectedCallback(),this._clearTimer(),window.removeEventListener("resize",this._resize_listener),document.removeEventListener("keydown",this._key_listener)}render(){let t={opacity:this.open?"1":"0",display:this._open?"block":"none",transition:`opacity ${this.animationDur/2}s linear`,"background-color":`${this.bgcolor}`};return n`
${this._posStyles()}
${this._hwStyles("height",this._height_breakpoints)}
${this._hwStyles("width",this._width_breakpoints)}
${this._animateStyles()}
<div @click=${this.nobgclose?null:this._containerClicked}
     class="__modal-container" style="${a(t)}">
    <div id="__wrapper" class="__modal-wrapper __resp_pos __resp_height
             __resp_width ${null!=this._mouse_up_listener?"mousedown":""} ${this.open?"animate-open":"animate-close"}"
        @animationend=${this._animationEndEvent}
        @touchstart=${this.guidesel?this._touchStart:null}
        @dragstart=${this.guidesel?this._dragStart:null}
        @mousedown=${this.guidesel?this._touchStart:null}
        @click=${this._wrapperClickedEvent}>
        <slot name="modal-body" id="slot-body" class="modal-body">
        </slot>
    </div>
</div>`}static get styles(){return h`
:host {position:relative}
.__modal-wrapper {z-index:1}
.__modal-container {position:fixed;top:0;bottom:0;right:0;left:0;}
.mousedown {user-select: none;}`}firstUpdated(){this._cur_pos=this._checkPos()}show(t){this._clearTimer(),this._open||(t?this._timer_obj=setTimeout((()=>{this._timer_obj=null,this.show()}),t):(this._setWrapperBoundsNull(),this.style.zIndex="1",this.stack?this.style.zIndex="1"+b.length:b.forEach((t=>t.hide())),this._actualparent||(this._actualparent=this.parentElement),this._open=this.open=!0,b.push(this),document.body.appendChild(this)))}hide(t){this._clearTimer(),this._open&&(t?this._timer_obj=setTimeout((()=>{this._timer_obj=null,this.hide()}),t):(this.open=!1,0==this.animationDur&&this._animationEndEvent()))}_handleKey(t){!this.noesc&&this.open&&"Escape"===t.key&&(b?.length&&b[b.length-1]!=this||this.hide())}_resizeEvent(){let t=this._checkPos();this._cur_pos!=t&&(this._setWrapperBoundsNull(),this._cur_pos=t)}_checkPos(){let t=window.innerWidth;for(let e of this._position_breakpoints)if((e.ll||0)<=t&&(!e.ul||e.ul>=t))return e.val}_setWrapperBoundsNull(){this._wrp_init_bounds&&(this._wrp_init_bounds=null,this._wrapper_el.style.right="",this._wrapper_el.style.left="",this._wrapper_el.style.width="",this._wrapper_el.style.top="",this._wrapper_el.style.bottom="",this._wrapper_el.style.height="")}_clearTimer(){this._timer_obj&&(clearTimeout(this._timer_obj),this._timer_obj=null)}_containerClicked(){this.open&&this.hide()}_wrapperClickedEvent(t){t.stopPropagation(),this.closesel&&t.target.matches(this.closesel)&&this.hide()}_animationEndEvent(){if(this._open=this.open,!this._open){this._actualparent?.appendChild(this);let t=b.indexOf(this);t>=0&&b.splice(t,1)}}_dragStart(t){t.preventDefault()}_touchStart(t){let e=window.getComputedStyle(this._wrapper_el).getPropertyValue("position"),i=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY;if("relative"==e)return;this._wrp_init_bounds||(this._wrp_init_bounds=this._wrapper_el.getBoundingClientRect());let o=t.target;for(this._mouse_direction={x:null,y:null};o;){if(o.matches(Object.keys(this._guide_value).join(","))){this._mouse_prev_y=s,this._mouse_prev_x=i,this._mouse_move_listener=this._mouseMoveEvent.bind(this),this._mouse_up_listener=this._mouseUpEvent.bind(this);for(let t of Object.keys(this._guide_value))o.matches(t)&&(this._mouse_pos_mod=this._guide_value[t]);document.addEventListener("mouseup",this._mouse_up_listener),document.addEventListener("touchend",this._mouse_up_listener),document.addEventListener("mousemove",this._mouse_move_listener),document.addEventListener("touchmove",this._mouse_move_listener),t.stopPropagation(),t.preventDefault();break}o=o.parentElement}}_mouseMoveEvent(t){if(!this._wrp_init_bounds)return;let e=t.touches?t.touches[0].clientX:t.clientX,i=t.touches?t.touches[0].clientY:t.clientY,s=e-this._mouse_prev_x,o=i-this._mouse_prev_y,n=this._wrapper_el.getBoundingClientRect(),h=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),_=.7;if(this._mouse_prev_y=i,this._mouse_prev_x=e,this._mouse_direction.x=s,this._mouse_direction.y=o,s){let t;if("left"==this._mouse_pos_mod){if(t=n.left+s,n.width-s<this._wrp_init_bounds.width*_)return void this.hide();if(t<0)return;this._wrapper_el.style.left=t+"px",this._wrapper_el.style.right||(this._wrapper_el.style.right=h-(this._wrp_init_bounds?.x+this._wrp_init_bounds?.width)+"px"),this._wrapper_el.style.width="auto"}else if("right"==this._mouse_pos_mod){if(t=h-n.x-n.width-s,n.width+s<this._wrp_init_bounds.width*_)return void this.hide();if(t<0)return;this._wrapper_el.style.right=t+"px",this._wrapper_el.style.left||(this._wrapper_el.style.left=this._wrp_init_bounds.x+"px"),this._wrapper_el.style.width="auto"}}if(o){let t;if("top"==this._mouse_pos_mod){if(t=n.top+o,n.height-o<this._wrp_init_bounds.height*_)return void this.hide();if(t<0)return;this._wrapper_el.style.top=t+"px",this._wrapper_el.style.bottom||(this._wrapper_el.style.bottom=r-(this._wrp_init_bounds.y+this._wrp_init_bounds.height)+"px"),this._wrapper_el.style.height="auto"}else if("bottom"==this._mouse_pos_mod){if(t=r-n.y-n.height-o,n.height+o<this._wrp_init_bounds.height*_)return void this.hide();if(t<0)return;this._wrapper_el.style.bottom=t+"px",this._wrapper_el.style.top||(this._wrapper_el.style.top=this._wrp_init_bounds.y+"px"),this._wrapper_el.style.height="auto"}}}_clampPoint(){let t=window.innerWidth,e=window.innerHeight;"left"==this._mouse_pos_mod?this._mouse_direction.x&&this._mouse_direction.x<0&&null!=this._clamp_values.left&&(this._wrapper_el.style.left=t/100*this._clamp_values.left+"px"):"right"==this._mouse_pos_mod?this._mouse_direction.x&&this._mouse_direction.x>0&&null!=this._clamp_values.right&&(this._wrapper_el.style.right=t/100*this._clamp_values.right+"px"):"top"==this._mouse_pos_mod?this._mouse_direction.y&&this._mouse_direction.y<0&&null!=this._clamp_values.top&&(this._wrapper_el.style.top=e/100*this._clamp_values.top+"px"):"bottom"==this._mouse_pos_mod&&this._mouse_direction.y&&this._mouse_direction.y>0&&null!=this._clamp_values.bottom&&(this._wrapper_el.style.bottom=e/100*this._clamp_values.bottom+"px")}_mouseUpEvent(){document.removeEventListener("mouseup",this._mouse_up_listener),document.removeEventListener("touchend",this._mouse_up_listener),document.removeEventListener("mousemove",this._mouse_move_listener),document.removeEventListener("touchmove",this._mouse_move_listener),this._clampPoint(),this._mouse_move_listener=this._mouse_up_listener=null}_posStyles(){if(!this._open)return;let t=[],e=t=>`${Object.keys(t).map((e=>`${e}:${t[e]}`)).join(";")}`;for(let i of this._position_breakpoints){let s=null,o=null,n=null;i.val.endsWith("center")&&(n="display:flex !important;justify-content:center","center"==i.val&&(o="margin:auto;position:relative",s="align-items:flex-start")),t.push(`\n@media screen and ${i.cond} {.__resp_pos {${e(w[i.val])}}\n${o?`.__modal-wrapper {${o}}`:""}\n.__modal-container {overflow:auto;${s};${n}}}`)}return n`<style>${l(t,(t=>n`${t}`))}</style>`}_hwStyles(t,e){let i=[];for(let s of e)"auto"!=s.val?i.push(`\n@media screen and ${s.cond} {.__resp_${t} {${t}:${s.val};\n${"width"==t?"overflow-x:auto":"overflow-y:auto"}}}`):i.push(`\n@media screen and ${s.cond} {#__wrapper {justify-content:center}}`);return n`<style>${l(i,(t=>n`${t}`))}</style>`}_animateStyles(){let t=[];for(let e of this._animate_breakpoints){let i={open:e.val,close:e.val};t.push(`\n@media screen and ${e.cond} {${d(".animate-open",".animate-close",i,this.animationDur)}}`)}return n`<style>${l(t,(t=>n`${t}`))}</style>`}};c([i({type:Boolean,reflect:!0,attribute:!0})],y.prototype,"open",2),c([i({type:String,attribute:!0})],y.prototype,"bgcolor",2),c([i({type:Boolean,attribute:!0})],y.prototype,"noesc",2),c([i({type:Boolean,attribute:!0})],y.prototype,"nobgclose",2),c([i({type:Boolean,attribute:!0})],y.prototype,"stack",2),c([i({type:String,attribute:!0})],y.prototype,"guidesel",2),c([i({type:String,attribute:!0})],y.prototype,"pos",2),c([i({type:String,attribute:!0})],y.prototype,"height",2),c([i({type:String,attribute:!0})],y.prototype,"width",2),c([i({type:String,attribute:!0})],y.prototype,"animation",2),c([i({type:String,attribute:!0})],y.prototype,"closesel",2),c([r()],y.prototype,"animationDur",2),c([r()],y.prototype,"_open",2),c([_("#__wrapper")],y.prototype,"_wrapper_el",2),y=c([s("aalam-modal")],y)}}}));
