var g=Object.freeze,C=Object.defineProperty;var u=(t,i)=>g(C(t,"raw",{value:g(i||t.slice())}));import{n as p,t as V,s as j,x as d,i as F}from"./index.js";import{r as T}from"./assets/state-amsnmWNs.js";import{e as P}from"./assets/query-DjSY4l8D.js";import{o as f}from"./assets/map-DiiNQ3pp.js";import{o as z}from"./assets/style-map-BSxMVyzs.js";import{g as c,p as B,a as O,b as W}from"./assets/utils-B-VCVQlU.js";import"./assets/base-DIkkzJ-c.js";function Y(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}var X=Object.defineProperty,M=Object.getOwnPropertyDescriptor,l=(t,i,o,e)=>{for(var s=e>1?void 0:e?M(i,o):i,r=t.length-1,_;r>=0;r--)(_=t[r])&&(s=(e?_(i,o,s):_(s))||s);return e&&s&&X(i,o,s),s};const a=[],v="1",x={bottom:{bottom:0,right:0,left:0,position:"absolute","max-height":"100vh"},top:{top:0,right:0,left:0,position:"absolute","max-height":"100vh"},right:{top:0,bottom:0,right:0,position:"absolute"},left:{top:0,bottom:0,left:0,position:"absolute"},center:{position:"relative"},"top-center":{top:0,position:"absolute","max-height":"100vh"},"bottom-center":{bottom:0,position:"absolute","max-height":"100vh"},"top-left":{top:0,left:0,position:"absolute","max-height":"100vh"},"top-right":{top:0,right:0,position:"absolute","max-height":"100vh"},"bottom-left":{bottom:0,left:0,position:"absolute","max-height":"100vh"},"bottom-right":{bottom:0,right:0,position:"absolute","max-height":"100vh"},full:{top:0,bottom:0,right:0,left:0,position:"absolute"}};var E,k,L,S,$,A,U,D;let n=class extends j{constructor(){super(),this.DEFAULT_VALUES={bgcolor:"rgba(0,0,0,0.6)",pos:"xs:bottom;m:top-center",height:"xs:50vh;m:auto",width:"xs:100%;m:50vw",animation:"xs:b2t",position_breakpoints:[{cond:"(min-width:0px) and (max-width:992px)",val:"bottom",ll:0,ul:992},{cond:"(min-width:992px)",val:"top-center",ll:993}],height_breakpoints:[{cond:"(min-width:0px) and (max-width:992px)",val:"50vh"},{cond:"(min-width:992px)",val:"auto"}],width_breakpoints:[{cond:"(min-width:0px) and (max-width:992px)",val:"100%"},{cond:"(min-width:992px)",val:"50vw"}],animate_breakpoints:[{cond:"(min-width:0px)",val:"b2t",ul:null,ll:0}]},this.open=!1,this.bgcolor=this.DEFAULT_VALUES.bgcolor,this.noesc=!1,this.nobgclose=!1,this.stack=!1,this.guidesel=null,this.pos=this.DEFAULT_VALUES.pos,this.height=this.DEFAULT_VALUES.height,this.width=this.DEFAULT_VALUES.width,this.animation=this.DEFAULT_VALUES.animation,this.closesel="",this.animationDur=300,this._open=!1,this._position_breakpoints=this.DEFAULT_VALUES.position_breakpoints,this._height_breakpoints=this.DEFAULT_VALUES.height_breakpoints,this._width_breakpoints=this.DEFAULT_VALUES.width_breakpoints,this._animate_breakpoints=this.DEFAULT_VALUES.animate_breakpoints,this._guide_value={},this._timer_obj=null,this._key_listener=this._handleKey.bind(this),this._resize_listener=this._resizeEvent.bind(this),this._clamp_values={}}attributeChangedCallback(t,i,o){if(super.attributeChangedCallback(t,i,o),t=="open")requestAnimationFrame(()=>{this.open?this.show():this.hide()});else if(t=="height")this._height_breakpoints=c(o,this.DEFAULT_VALUES.height,e=>{try{return CSSStyleValue.parse("height",e),!0}catch(s){}return!1});else if(t=="width")this._width_breakpoints=c(o,this.DEFAULT_VALUES.width,e=>{try{return CSSStyleValue.parse("width",e),!0}catch(s){}return!1});else if(t=="pos")this._position_breakpoints=c(o,this.DEFAULT_VALUES.pos,e=>x[e]);else if(t=="animation")this._animate_breakpoints=c(o,this.DEFAULT_VALUES.animation,e=>W[e]);else if(t=="guidesel"){let e=B(o);for(let s in e){if(e[s].includes(",")){let r=e[s].split(",");if(e[s]=r[0],r[1]=="edge")this._clamp_values[s]=0;else{let _=+r[1];!isNaN(_)&&_<=20&&_>=0&&(this._clamp_values[s]=_)}}this._guide_value[e[s]]=s}}}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this._resize_listener),document.addEventListener("keydown",this._key_listener)}disconnectedCallback(){super.disconnectedCallback(),this._clearTimer(),window.removeEventListener("resize",this._resize_listener),document.removeEventListener("keydown",this._key_listener)}render(){let t={opacity:this.open?"1":"0",display:this._open?"block":"none",transition:"opacity ".concat(this.animationDur/2,"s linear"),"background-color":"".concat(this.bgcolor)};return d(E||(E=u(["\n","\n","\n","\n","\n<div @click=",'\n     class="__modal-container" style="','">\n    <div id="__wrapper" class="__modal-wrapper __resp_pos __resp_height\n             __resp_width '," ",'"\n        @animationend=',"\n        @touchstart=","\n        @dragstart=","\n        @mousedown=","\n        @click=",'>\n        <slot name="modal-body" id="slot-body" class="modal-body">\n        </slot>\n    </div>\n</div>'])),this._posStyles(),this._hwStyles("height",this._height_breakpoints),this._hwStyles("width",this._width_breakpoints),this._animateStyles(),this.nobgclose?null:this._containerClicked,z(t),this._mouse_up_listener!=null?"mousedown":"",this.open?"animate-open":"animate-close",this._animationEndEvent,this.guidesel?this._touchStart:null,this.guidesel?this._dragStart:null,this.guidesel?this._touchStart:null,this._wrapperClickedEvent)}static get styles(){return F(k||(k=u(["\n:host {position:relative}\n.__modal-wrapper {z-index:1}\n.__modal-container {position:fixed;top:0;bottom:0;right:0;left:0;}\n.mousedown {user-select: none;}"])))}firstUpdated(){this._cur_pos=this._checkPos()}show(t){if(this._clearTimer(),!this._open){if(t){this._timer_obj=setTimeout(()=>{this._timer_obj=null,this.show()},t);return}else this._setWrapperBoundsNull();this.style.zIndex=v,this.stack?this.style.zIndex=v+a.length:a.forEach(i=>i.hide()),this._actualparent||(this._actualparent=this.parentElement),this._open=this.open=!0,a.push(this),document.body.appendChild(this)}}hide(t){if(this._clearTimer(),!!this._open){if(t){this._timer_obj=setTimeout(()=>{this._timer_obj=null,this.hide()},t);return}else this.open=!1;this.animationDur==0&&this._animationEndEvent()}}_handleKey(t){!this.noesc&&this.open&&t.key==="Escape"&&(!(a!=null&&a.length)||a[a.length-1]==this)&&this.hide()}_resizeEvent(){let t=this._checkPos();this._cur_pos!=t&&(this._setWrapperBoundsNull(),this._cur_pos=t)}_checkPos(){let t=window.innerWidth;for(let i of this._position_breakpoints)if((i.ll||0)<=t&&(!i.ul||i.ul>=t))return i.val}_setWrapperBoundsNull(){this._wrp_init_bounds&&(this._wrp_init_bounds=null,this._wrapper_el.style.right="",this._wrapper_el.style.left="",this._wrapper_el.style.width="",this._wrapper_el.style.top="",this._wrapper_el.style.bottom="",this._wrapper_el.style.height="")}_clearTimer(){this._timer_obj&&(clearTimeout(this._timer_obj),this._timer_obj=null)}_containerClicked(){this.open&&this.hide()}_wrapperClickedEvent(t){t.stopPropagation(),this.closesel&&t.target.matches(this.closesel)&&this.hide()}_animationEndEvent(){var t;if(this._open=this.open,!this._open){(t=this._actualparent)==null||t.appendChild(this);let i=a.indexOf(this);i>=0&&a.splice(i,1)}}_dragStart(t){t.preventDefault()}_touchStart(t){let i=window.getComputedStyle(this._wrapper_el).getPropertyValue("position"),o=t.touches?t.touches[0].clientX:t.clientX,e=t.touches?t.touches[0].clientY:t.clientY;if(i=="relative")return;this._wrp_init_bounds||(this._wrp_init_bounds=this._wrapper_el.getBoundingClientRect());let s=t.target;for(this._mouse_direction={x:null,y:null};s;)if(s.matches(Object.keys(this._guide_value).join(","))){this._mouse_prev_y=e,this._mouse_prev_x=o,this._mouse_move_listener=this._mouseMoveEvent.bind(this),this._mouse_up_listener=this._mouseUpEvent.bind(this);for(let r of Object.keys(this._guide_value))s.matches(r)&&(this._mouse_pos_mod=this._guide_value[r]);document.addEventListener("mouseup",this._mouse_up_listener),document.addEventListener("touchend",this._mouse_up_listener),document.addEventListener("mousemove",this._mouse_move_listener),document.addEventListener("touchmove",this._mouse_move_listener),t.stopPropagation(),t.preventDefault();break}else s=s.parentElement}_mouseMoveEvent(t){var w,y;if(!this._wrp_init_bounds)return;let i=t.touches?t.touches[0].clientX:t.clientX,o=t.touches?t.touches[0].clientY:t.clientY,e=i-this._mouse_prev_x,s=o-this._mouse_prev_y,r=this._wrapper_el.getBoundingClientRect(),_=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),b=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),m=70/100;if(this._mouse_prev_y=o,this._mouse_prev_x=i,this._mouse_direction.x=e,this._mouse_direction.y=s,e){let h;if(this._mouse_pos_mod=="left"){if(h=r.left+e,r.width-e<this._wrp_init_bounds.width*m){this.hide();return}else if(h<0)return;this._wrapper_el.style.left=h+"px",this._wrapper_el.style.right||(this._wrapper_el.style.right=_-(((w=this._wrp_init_bounds)==null?void 0:w.x)+((y=this._wrp_init_bounds)==null?void 0:y.width))+"px"),this._wrapper_el.style.width="auto"}else if(this._mouse_pos_mod=="right"){if(h=_-r.x-r.width-e,r.width+e<this._wrp_init_bounds.width*m){this.hide();return}else if(h<0)return;this._wrapper_el.style.right=h+"px",this._wrapper_el.style.left||(this._wrapper_el.style.left=this._wrp_init_bounds.x+"px"),this._wrapper_el.style.width="auto"}}if(s){let h;if(this._mouse_pos_mod=="top"){if(h=r.top+s,r.height-s<this._wrp_init_bounds.height*m){this.hide();return}else if(h<0)return;this._wrapper_el.style.top=h+"px",this._wrapper_el.style.bottom||(this._wrapper_el.style.bottom=b-(this._wrp_init_bounds.y+this._wrp_init_bounds.height)+"px"),this._wrapper_el.style.height="auto"}else if(this._mouse_pos_mod=="bottom"){if(h=b-r.y-r.height-s,r.height+s<this._wrp_init_bounds.height*m){this.hide();return}else if(h<0)return;this._wrapper_el.style.bottom=h+"px",this._wrapper_el.style.top||(this._wrapper_el.style.top=this._wrp_init_bounds.y+"px"),this._wrapper_el.style.height="auto"}}}_clampPoint(){let t=window.innerWidth,i=window.innerHeight;this._mouse_pos_mod=="left"?this._mouse_direction.x&&this._mouse_direction.x<0&&this._clamp_values.left!=null&&(this._wrapper_el.style.left=t/100*this._clamp_values.left+"px"):this._mouse_pos_mod=="right"?this._mouse_direction.x&&this._mouse_direction.x>0&&this._clamp_values.right!=null&&(this._wrapper_el.style.right=t/100*this._clamp_values.right+"px"):this._mouse_pos_mod=="top"?this._mouse_direction.y&&this._mouse_direction.y<0&&this._clamp_values.top!=null&&(this._wrapper_el.style.top=i/100*this._clamp_values.top+"px"):this._mouse_pos_mod=="bottom"&&this._mouse_direction.y&&this._mouse_direction.y>0&&this._clamp_values.bottom!=null&&(this._wrapper_el.style.bottom=i/100*this._clamp_values.bottom+"px")}_mouseUpEvent(){document.removeEventListener("mouseup",this._mouse_up_listener),document.removeEventListener("touchend",this._mouse_up_listener),document.removeEventListener("mousemove",this._mouse_move_listener),document.removeEventListener("touchmove",this._mouse_move_listener),this._clampPoint(),this._mouse_move_listener=this._mouse_up_listener=null}_posStyles(){if(!this._open)return;let t=[],i=o=>"".concat(Object.keys(o).map(e=>"".concat(e,":").concat(o[e])).join(";"));for(let o of this._position_breakpoints){let e=null,s=null,r=null;o.val.endsWith("center")&&(r="display:flex !important;justify-content:center",o.val=="center"&&(s="margin:auto;position:relative",e="align-items:flex-start")),t.push("\n@media screen and ".concat(o.cond," {.__resp_pos {").concat(i(x[o.val]),"}\n").concat(s?".__modal-wrapper {".concat(s,"}"):"","\n.__modal-container {overflow:auto;").concat(e,";").concat(r,"}}"))}return d(S||(S=u(["<style>","</style>"])),f(t,o=>d(L||(L=u(["",""])),o)))}_hwStyles(t,i){let o=[];for(let e of i)e.val!="auto"?o.push("\n@media screen and ".concat(e.cond," {.__resp_").concat(t," {").concat(t,":").concat(e.val,";\n").concat(t=="width"?"overflow-x:auto":"overflow-y:auto","}}")):o.push("\n@media screen and ".concat(e.cond," {#__wrapper {justify-content:center}}"));return d(A||(A=u(["<style>","</style>"])),f(o,e=>d($||($=u(["",""])),e)))}_animateStyles(){let t=[];for(let i of this._animate_breakpoints){let o={open:i.val,close:i.val};t.push("\n@media screen and ".concat(i.cond," {").concat(O(".animate-open",".animate-close",o,this.animationDur),"}"))}return d(D||(D=u(["<style>","</style>"])),f(t,i=>d(U||(U=u(["",""])),i)))}};l([p({type:Boolean,reflect:!0,attribute:!0})],n.prototype,"open",2);l([p({type:String,attribute:!0})],n.prototype,"bgcolor",2);l([p({type:Boolean,attribute:!0})],n.prototype,"noesc",2);l([p({type:Boolean,attribute:!0})],n.prototype,"nobgclose",2);l([p({type:Boolean,attribute:!0})],n.prototype,"stack",2);l([p({type:String,attribute:!0})],n.prototype,"guidesel",2);l([p({type:String,attribute:!0})],n.prototype,"pos",2);l([p({type:String,attribute:!0})],n.prototype,"height",2);l([p({type:String,attribute:!0})],n.prototype,"width",2);l([p({type:String,attribute:!0})],n.prototype,"animation",2);l([p({type:String,attribute:!0})],n.prototype,"closesel",2);l([T()],n.prototype,"animationDur",2);l([T()],n.prototype,"_open",2);l([P("#__wrapper")],n.prototype,"_wrapper_el",2);n=l([V("aalam-modal")],n);export{Y as __vite_legacy_guard};
