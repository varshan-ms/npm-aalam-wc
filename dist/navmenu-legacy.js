System.register(["./index-legacy.js","./assets/query-legacy-CILVpPJY.js","./dropdown-legacy.js","./assets/base-legacy-ClOgP1kU.js","./assets/query-assigned-elements-legacy-1pHNcqST.js","./assets/floating-ui.dom-legacy-BJ3fVfQ2.js","./assets/utils-legacy-1NLZUWf7.js"],(function(t,e){"use strict";var s,i,r,n,d;return{setters:[t=>{s=t.s,i=t.x,r=t.i,n=t.n},t=>{d=t.e},null,null,null,null,null],execute:function(){var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,l=(s,i,r,n)=>{for(var d,l=n>1?void 0:n?e(i,r):i,o=s.length-1;o>=0;o--)(d=s[o])&&(l=(n?d(i,r,l):d(l))||l);return n&&l&&t(i,r,l),l};class o extends s{constructor(){super(),this.direction="last",this._sorted_menu=[],this._slot_order_list=[],this._slot_dirty_changes=!1,this._sorted_dd=[],this._resizeListener=this._manageCollapsedItems.bind(this)}attributeChangedCallback(t,e,s){super.attributeChangedCallback(t,e,s),"direction"==t&&"first"!=s&&"last"!=s&&(this.direction="last")}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this._resizeListener),this.renderRoot.addEventListener("slotchange",(t=>{this._slotChangedEvent(t)}))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._resizeListener)}render(){return i`
<div id='_container' part='menu-container'>
    <slot name='menu-item'></slot>
    <aalam-dropdown>
        <div slot='dd-toggler'>
            <slot name='toggle-item'></slot>
        </div>
        <div slot='dd-body' part='dd-body'>
            <slot name="__collapsed_item"></slot>
        </div>
    </aalam-dropdown>
</div>`}static get styles(){return r`
:host {display:flex;width:100%;}
#_container {display:inline-flex}`}_slotChangedEvent(t){let e=t.target?.name;if("__collapsed_item"!=e){if("toggle-item"==e){let t=this.renderRoot.querySelector("aalam-dropdown"),e=this.querySelector("[slot=toggle-item]");if(!t||!e)return;t.updateComplete.then((()=>{this._tgl_width=e.getBoundingClientRect().width,this._dd_toggler.style.display="none",this._manageCollapsedItems()}))}if(this._slot_dirty_changes)this._slot_dirty_changes=!1;else if("menu-item"==e){let t=Array.from(this.querySelectorAll("[slot=menu-item]"));t.forEach((t=>{let e=t.getBoundingClientRect().width;this._slot_order_list.push(e)})),this._sorted_menu=t.sort(((e,s)=>{let i=parseInt(e.getAttribute("data-priority")||"0",0),r=parseInt(s.getAttribute("data-priority")||"0",0);if(i===r){if("last"==this.direction)return t.indexOf(s)-t.indexOf(e);if("first"==this.direction)return t.indexOf(e)-t.indexOf(s)}return i-r}))}}}_manageCollapsedItems(){const t=()=>this._sorted_dd.length,e=()=>this._container.getBoundingClientRect().width,s=()=>this.parentElement?.clientWidth||this.clientWidth,i=(t,e)=>{this._slot_dirty_changes=!0,t.slot=e},r=()=>{let e=Array.prototype.indexOf.call(this.children,this._sorted_dd[t()-1]);return this._slot_order_list[e]};let n=s(),d=e();if(n<=d){if(this._dd_toggler.style.display="block",this._sorted_menu.length<1)return;for(;n<=d;){if(i(this._sorted_menu[0],"__collapsed_item"),this._sorted_dd.push(this._sorted_menu[0]),this._sorted_menu.splice(0,1),this._sorted_menu.length<1)return;d=e()}}else if(n>=d){let l=t();if(l<1)return void(this._dd_toggler.style.display="none");for(1==l&&(n=s()+this._tgl_width);n>=d+r();){if(1==l&&(this._dd_toggler.style.display="none"),i(this._sorted_dd[t()-1],"menu-item"),this._sorted_menu.splice(0,0,this._sorted_dd[l-1]),this._sorted_dd.splice(l-1,1),l=t(),l<1)return;d=e(),1==l&&(n+=this._tgl_width)}}}}l([n({type:String})],o.prototype,"direction",2),l([d("[slot=dd-body]")],o.prototype,"_dd_body",2),l([d("[slot=dd-toggler]")],o.prototype,"_dd_toggler",2),l([d("#_container")],o.prototype,"_container",2),customElements.define("aalam-navmenu",o)}}}));
