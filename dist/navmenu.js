var p=Object.freeze,f=Object.defineProperty;var h=(l,e)=>p(f(l,"raw",{value:p(e||l.slice())}));import{s as y,x as w,i as v,n as C}from"./index.js";import{e as c}from"./assets/query-DjSY4l8D.js";import"./dropdown.js";import"./assets/base-DIkkzJ-c.js";import"./assets/query-assigned-elements-CUArdile.js";import"./assets/floating-ui.dom-BaRZHZuk.js";import"./assets/utils-B-VCVQlU.js";function E(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}var b=Object.defineProperty,x=Object.getOwnPropertyDescriptor,a=(l,e,n,r)=>{for(var t=r>1?void 0:r?x(e,n):e,d=l.length-1,s;d>=0;d--)(s=l[d])&&(t=(r?s(e,n,t):s(t))||t);return r&&t&&b(e,n,t),t},m,u;class _ extends y{constructor(){super(),this.direction="last",this._sorted_menu=[],this._slot_order_list=[],this._slot_dirty_changes=!1,this._sorted_dd=[],this._resizeListener=this._manageCollapsedItems.bind(this)}attributeChangedCallback(e,n,r){super.attributeChangedCallback(e,n,r),e=="direction"&&r!="first"&&r!="last"&&(this.direction="last")}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this._resizeListener),this.renderRoot.addEventListener("slotchange",e=>{this._slotChangedEvent(e)})}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._resizeListener)}render(){return w(m||(m=h(["\n<div id='_container' part='menu-container'>\n    <slot name='menu-item'></slot>\n    <aalam-dropdown>\n        <div slot='dd-toggler'>\n            <slot name='toggle-item'></slot>\n        </div>\n        <div slot='dd-body' part='dd-body'>\n            <slot name=\"__collapsed_item\"></slot>\n        </div>\n    </aalam-dropdown>\n</div>"])))}static get styles(){return v(u||(u=h(["\n:host {display:flex;width:100%;}\n#_container {display:inline-flex}"])))}_slotChangedEvent(e){var r;let n=(r=e.target)==null?void 0:r.name;if(n!="__collapsed_item"){if(n=="toggle-item"){let t=this.renderRoot.querySelector("aalam-dropdown"),d=this.querySelector("[slot=toggle-item]");if(!t||!d)return;t.updateComplete.then(()=>{this._tgl_width=d.getBoundingClientRect().width,this._dd_toggler.style.display="none",this._manageCollapsedItems()})}if(this._slot_dirty_changes){this._slot_dirty_changes=!1;return}if(n=="menu-item"){let t=Array.from(this.querySelectorAll("[slot=menu-item]"));t.forEach(d=>{let s=d.getBoundingClientRect().width;this._slot_order_list.push(s)}),this._sorted_menu=t.sort((d,s)=>{let o=parseInt(d.getAttribute("data-priority")||"0",0),i=parseInt(s.getAttribute("data-priority")||"0",0);if(o===i){if(this.direction=="last")return t.indexOf(s)-t.indexOf(d);if(this.direction=="first")return t.indexOf(d)-t.indexOf(s)}return o-i})}}}_manageCollapsedItems(){const e=()=>this._sorted_dd.length,n=()=>this._container.getBoundingClientRect().width,r=()=>{var i;return((i=this.parentElement)==null?void 0:i.clientWidth)||this.clientWidth},t=(i,g)=>{this._slot_dirty_changes=!0,i.slot=g},d=()=>{let i=Array.prototype.indexOf.call(this.children,this._sorted_dd[e()-1]);return this._slot_order_list[i]};let s=r(),o=n();if(s<=o){if(this._dd_toggler.style.display="block",this._sorted_menu.length<1)return;for(;s<=o;){if(t(this._sorted_menu[0],"__collapsed_item"),this._sorted_dd.push(this._sorted_menu[0]),this._sorted_menu.splice(0,1),this._sorted_menu.length<1)return;o=n()}}else if(s>=o){let i=e();if(i<1){this._dd_toggler.style.display="none";return}for(i==1&&(s=r()+this._tgl_width);s>=o+d();){if(i==1&&(this._dd_toggler.style.display="none"),t(this._sorted_dd[e()-1],"menu-item"),this._sorted_menu.splice(0,0,this._sorted_dd[i-1]),this._sorted_dd.splice(i-1,1),i=e(),i<1)return;o=n(),i==1&&(s+=this._tgl_width)}}}}a([C({type:String})],_.prototype,"direction",2);a([c("[slot=dd-body]")],_.prototype,"_dd_body",2);a([c("[slot=dd-toggler]")],_.prototype,"_dd_toggler",2);a([c("#_container")],_.prototype,"_container",2);customElements.define("aalam-navmenu",_);export{E as __vite_legacy_guard};
