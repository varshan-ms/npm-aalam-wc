var c=Object.freeze,p=Object.defineProperty;var h=(t,l)=>c(p(t,"raw",{value:c(l||t.slice())}));import{n as f,t as g,s as v,i as k,x as T}from"./index.js";function S(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}var w=Object.defineProperty,b=Object.getOwnPropertyDescriptor,u=(t,l,s,r)=>{for(var a=r>1?void 0:r?b(l,s):l,e=t.length-1,i;e>=0;e--)(i=t[e])&&(a=(r?i(l,s,a):i(a))||a);return r&&a&&w(l,s,a),a},m,d;let _=class extends v{constructor(){super(),this.elapseat="",this._my_interval=null}static get styles(){return k(m||(m=h(["\n:host {\n    display:inline-block;\n}"])))}render(){return T(d||(d=h(["\n<div>\n    <slot name='tt-tick'> </slot>\n    <slot name='tt-elapsed'> </slot>\n</div>"])))}connectedCallback(){super.connectedCallback(),this.elementHolder(),this.startTimer()}disconnectedCallback(){super.disconnectedCallback(),this.clearTimer()}attributeChangedCallback(t,l,s){super.attributeChangedCallback(t,l,s),this.elapseat&&(this._elapsed_date=new Date(s),l&&this.startTimer())}clearTimer(){this._my_interval&&(clearInterval(this._my_interval),this._my_interval=null)}elementHolder(){this._year_el=this.querySelector("[data-timetick=year]"),this._month_el=this.querySelector("[data-timetick=month]"),this._week_el=this.querySelector("[data-timetick=week]"),this._day_el=this.querySelector("[data-timetick=day]"),this._hour_el=this.querySelector("[data-timetick=hour]"),this._min_el=this.querySelector("[data-timetick=min]"),this._sec_el=this.querySelector("[data-timetick=sec]")}startTimer(){this.clearTimer(),this.hideMsg(),this.timeCount(),this._my_interval=setInterval(()=>this.timeCount(),1e3)}timeCount(){let t=new Date;if(this._elapsed_date.valueOf()-t.valueOf()<=0){this.clearTimer(),this.elapsed();return}let s=i=>i<10?"0".concat(i):i;const r=["Seconds","Minutes","Hours","Date","Month","Year"],a=[60,60,24,new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),12,-1];let e=Array(6);for(let i=0;i<r.length;i++){let o=y=>y["get".concat(r[i])](),n=(e[i]||0)+o(this._elapsed_date)-o(t);n<0&&(n+=a[i],e[i+1]=-1),e[i]=n}if(this._year_el?this._year_el.innerText="".concat(s(e[5])):(e[4]=e[4]+e[5]*12,e[5]=0),this._month_el?this._month_el.innerText="".concat(s(e[4])):(this._year_el&&e[5]>0&&(t=new Date(t.getFullYear()+e[5],t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())),e[3]=Math.floor((this._elapsed_date.getTime()-t.getTime())/(1e3*24*3600))),this._week_el){let i=Math.floor(e[3]/7);e[3]=e[3]%7,this._week_el.innerText="".concat(s(i))}this._day_el?this._day_el.innerText="".concat(s(e[3])):e[2]=e[2]+e[3]*24,this._hour_el?this._hour_el.innerText="".concat(s(e[2])):e[1]=e[1]+e[2]*60,this._min_el?this._min_el.innerText="".concat(s(e[1])):e[0]=e[0]+e[1]*60,this._sec_el&&(this._sec_el.innerText="".concat(s(e[0]))),this.dispatchEvent(new CustomEvent("tick",{detail:{year:this._year_el,month:this._month_el,week:this._week_el,day:this._day_el,hour:this._hour_el,min:this._min_el,sec:this._sec_el}}))}elapsed(){this.querySelectorAll("[data-timetick]").forEach(s=>{s.innerText="00"}),this.dispatchEvent(new CustomEvent("elapsed"));const l=this.querySelector("[data-msg=msg]");l&&(l.style.display="block")}hideMsg(){const t=this.querySelector("[data-msg=msg]");t&&(t.style.display="none")}};u([f({type:String,attribute:!0})],_.prototype,"elapseat",2);_=u([g("aalam-timetick")],_);export{S as __vite_legacy_guard};
