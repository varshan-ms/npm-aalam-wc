var w=Object.freeze,O=Object.defineProperty;var p=(t,l)=>w(O(t,"raw",{value:w(l||t.slice())}));import{n as N,t as I,s as L,x as g,i as j}from"./index.js";import{o as $}from"./assets/style-map-BSxMVyzs.js";import{o as V}from"./assets/map-DiiNQ3pp.js";import{n as P}from"./assets/when-BR7zwNJC.js";import{e as R}from"./assets/base-DIkkzJ-c.js";import{p as D}from"./assets/utils-B-VCVQlU.js";function K(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let v;function U(t){return(l,i)=>R(l,i,{get(){var e;return((e=this.renderRoot)!=null?e:v!=null?v:v=document.createDocumentFragment()).querySelectorAll(t)}})}var B=Object.defineProperty,z=Object.getOwnPropertyDescriptor,m=(t,l,i,e)=>{for(var r=e>1?void 0:e?z(l,i):l,a=t.length-1,n;a>=0;a--)(n=t[a])&&(r=(e?n(l,i,r):n(r))||r);return e&&r&&B(l,i,r),r},C,E,A,S;let f=class extends L{constructor(){super(),this.order="",this.value="",this._items=[],this._dset={},this._evnt_data={},this._isNum=t=>["n","num","number"].indexOf((t.type||"").toLowerCase())>=0}_getItemSpec(t){let l=t;if(!(t in this._dset)){if(!this.dataset[l]){for(let e of Object.keys(this.dataset))if(e[e.length-1]=="*"&&t.startsWith(e.substr(0,e.length-1))){l=e;break}if(!this.dataset[l])return console.warn("No data attribute set for ",t),this._dset[t]={}}let i=this.dataset[l]||"";if(this._dset[t]=D(i),this._dset[t].choices&&(this._dset[t].choices=this._dset[t].choices.split(","),!this._dset[t].chars)){let e=this._dset[t].choices[0].length;for(let r=0;r<this._dset[t].choices.length;r++)e=Math.max(this._dset[t].choices[r].length,e);this._dset[t].chars=e}}return this._dset[t]}_itemHtml(t,l){var n;let i=this._getItemSpec(t),e=l==this._items.length-1,r={};i.chars&&(r.width="".concat(+i.chars+1,"ch")),i.gapnxt&&!i.sepnxt&&!e&&(r["margin-right"]=i.gapnxt);let a={};return i.sepnxt&&(a.display="inline-block",a.width=i.gapnxt,a["text-align"]="center"),g(E||(E=p(['\n<input id="','" part="inp-field" class="fld" data-ix="','"\n    type="','" style=','\n    placeholder="','" @input='," @blur=","\n    @keydown="," @click=","\n    value=",'\n    autocomplet="off"/>\n',"\n"])),t,l,i.type=="text"?"text":"tel",$(r),i.ph,this._inputEvent,this._blurEvent,this._keyDownEvent,this._clickEvent,(n=i.choices)!=null&&n.length?i.choices[0]:null,P(i.sepnxt&&!e,()=>g(C||(C=p(["<div style=",">","</div>"])),$(a),i.sepnxt)))}_resetChoiceVal(t){var l;(l=t.dataset)!=null&&l.val&&t.setAttribute("data-val","")}_choicesKeyDown(t,l,i){var a;if(t.preventDefault(),!i)return!1;let e=t.target,r=((a=e.dataset)==null?void 0:a.val)||"";for(let n=0;n<l.choices.length;n++)if(l.choices[n].toLowerCase().indexOf((r+t.key).toLowerCase())==0){e.value=l.choices[n];break}return e.setAttribute("data-val",r+t.key),!1}_clickEvent(t){t.target.select()}_keyDownEvent(t){var o,u,_,y,x,k,b;let i=+(((o=t.target.dataset)==null?void 0:o.ix)||-1),e=this.input_els[i],r=i==this._items.length-1?0:i+1,a=i==0?this._items.length-1:i-1,n=e.selectionStart,s=this._getItemSpec(e.id);if(t.key=="ArrowRight"||t.key=="Delete")if(n==e.value.length||t.key=="ArrowRight"&&((u=s.choices)!=null&&u.length)){if(i-r>0&&t.key=="Delete")return t.preventDefault(),!1;let h=this.input_els[r];h.focus(),h.selectionStart=h.selectionEnd=0,t.key=="ArrowRight"&&t.preventDefault()}else(_=s.choices)!=null&&_.length&&t.key=="Delete"&&(e.value=s.choices[0],this._resetChoiceVal(e),t.preventDefault());else if(t.key=="ArrowLeft"||t.key=="Backspace")if(n==0||t.key=="ArrowLeft"&&((y=s.choices)!=null&&y.length)){if(i-a<0&&t.key=="Backspace")return t.preventDefault(),!1;let h=this.input_els[a];h.focus(),h.selectionStart=h.selectionEnd=h.value.length,t.key=="ArrowLeft"&&t.preventDefault()}else(x=s.choices)!=null&&x.length&&t.key=="Backspace"&&(e.value=s.choices[0],t.preventDefault(),this._resetChoiceVal(e));else if(t.key=="ArrowUp"||t.key=="ArrowDown"){let h=+e.value;if((k=s.choices)!=null&&k.length){let d=e.value,c=s.choices.indexOf(d);t.key=="ArrowDown"?e.value=s.choices[c==s.choices.length-1?0:c+1]:e.value=s.choices[c==0?s.choices.length-1:c-1]}else{if(isNaN(h))return;t.key=="ArrowUp"&&(!s.nmax||s.loop=="1"&&s.nmin||h<=+s.nmax-1)&&(!s.chars||(""+(h+1)).length<=+s.chars)?(s.loop=="1"&&s.nmin&&s.nmax&&h>=+s.nmax&&(h=+s.nmin-1),e.value=""+(h+1)):t.key=="ArrowDown"&&(!s.nmin||s.loop=="1"&&s.nmax||h>=+s.nmin+1)&&(!s.chars||(""+(h-1)).length<=+s.chars)&&(s.loop=="1"&&s.nmin!=null&&s.nmax&&h<=+s.nmin&&(h=+s.nmax+1),e.value=""+(h-1))}this._raiseEvent(e,s)}else{let h=t.key.length==1&&t.key.match(/^[A-Za-z0-9!"#$%&'()*+,.\/:;<=>?@\[\] ^_`{|}~-]*$/g)!=null;if((b=s.choices)!=null&&b.length)return this._choicesKeyDown(t,s,h);if(e.selectionStart!=e.selectionEnd)return!0;if(h){let d=e.value,c=this._isNum(s)&&s.nmax&&+s.nmax<+(d.slice(0,n)+t.key+d.slice(n));if(e.value.length>=+s.chars||c)return t.preventDefault(),!1}}return!0}_raiseEvent(t,l){let i=t.id,e=this._isNum(l);if(this._evnt_data[i]==(e?+t.value:t.value))return;let r=this._evnt_data[i];this._evnt_data[i]=t.value,this.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{changed:i,old_val:r,new_val:this._evnt_data[i],all:{...this._evnt_data}}})),this.value=this._items.map(a=>"".concat(a,":").concat(this._evnt_data[a]||"")).join(";")}_blurEvent(t){let l=t.target;this._resetChoiceVal(l),this._raiseEvent(l,this._getItemSpec(l.id))}_inputEvent(t){var u;let l=t.target,i=l.id,e=+(((u=l.dataset)==null?void 0:u.ix)||-1),r=e==this._items.length-1?0:e+1,a=this._getItemSpec(i),n=l,s=this._isNum(a),o=s&&a.nmax&&+a.nmax<+(n.value+"0");if(n.value.length>=+a.chars||o){o&&n.value.length>+a.chars?n.value=a.nmax:s&&a.nmin&&+n.value<+a.nmin&&(n.value=a.nmin);let _=this.input_els[r];_.focus(),_.select(),this._raiseEvent(n,a)}}_valueChanged(){let t=D(this.value);for(let l in this._items){let i=this._items[l],e=t[i]||"";this._evnt_data[i]=this._isNum(this._getItemSpec(i))?+e:e,this.input_els[l]&&(this.input_els[l].value=t[i]||"")}}attributeChangedCallback(t,l,i){super.attributeChangedCallback(t,l,i),t=="order"?this._items=i.split(",").map(e=>e.trim()):t=="value"&&this.input_els.length>0&&this._valueChanged()}connectedCallback(){super.connectedCallback()}render(){return g(A||(A=p(["\n","\n"])),V(this._items,(t,l)=>this._itemHtml(t,l)))}static get styles(){return j(S||(S=p(["\n:host {display:inline-block;}\ninput,input:focus {border:0;padding:0;outline:0;}\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;margin: 0;\n}\ninput[type=number] {-moz-appearance: textfield;}\n"])))}firstUpdated(t){super.firstUpdated(t),this.value&&this._valueChanged()}get valdata(){return{...this._evnt_data}}};m([N({type:String,attribute:!0})],f.prototype,"order",2);m([N({type:String,attribute:!0})],f.prototype,"value",2);m([U(".fld")],f.prototype,"input_els",2);f=m([I("aalam-minput")],f);export{K as __vite_legacy_guard};
