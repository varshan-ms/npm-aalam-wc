var O=Object.freeze,$=Object.defineProperty;var k=(i,t)=>O($(i,"raw",{value:O(t||i.slice())}));import{n as _,t as S,s as W,x as A,i as N}from"./index.js";import{e as R}from"./assets/query-DjSY4l8D.js";import{o as L}from"./assets/query-assigned-elements-CUArdile.js";import{o as j,s as z,b as Y,c as B,f as I}from"./assets/floating-ui.dom-BaRZHZuk.js";import{p as Q}from"./assets/utils-B-VCVQlU.js";import"./assets/base-DIkkzJ-c.js";function U(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}var X=Object.defineProperty,F=Object.getOwnPropertyDescriptor,d=(i,t,o,e)=>{for(var s=e>1?void 0:e?F(t,o):t,a=i.length-1,h;a>=0;a--)(h=i[a])&&(s=(e?h(t,o,s):h(s))||s);return e&&s&&X(t,o,s),s},C,M;let l=class extends W{constructor(){super(...arguments),this.animation="",this.animationDur=100,this.closesel="dd-close",this.boundsel="",this.mode="click",this.position="bottom-left",this.noflip=!1,this.offset=0,this._isOpen=!1,this._cleanup=null,this._animation_styles={show:"",hide:""},this._outside_click_event_listener=this._handleOutsideClick.bind(this),this._hide_event_listener=this.hide.bind(this),this._toggleDropdown=i=>{const o=i.target.closest("aalam-dropdown");(!o||o===this)&&(this._isOpen?this.hide():this.show())}}attributeChangedCallback(i,t,o){if(super.attributeChangedCallback(i,t,o),i=="position")(s=>["top","left","bottom","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"].includes(s))(this.position)||(this.position="bottom-left");else if(i=="animation"){let e=["reveal-x","reveal-y","fade-in"],s=["conceal-x","conceal-y","fade-out"];e.includes(this.animation)||s.includes(this.animation)?this.animation.startsWith("fade")?this._animation_styles={show:"fade-in",hide:"fade-out"}:this.animation.endsWith("x")?this._animation_styles={show:"reveal-x",hide:"conceal-x"}:this._animation_styles={show:"reveal-y",hide:"conceal-y"}:(this._animation_styles=Q(this.animation),e.includes(this._animation_styles.show)||(this._animation_styles.show=""),s.includes(this._animation_styles.hide)||(this._animation_styles.hide="")),this._animation_styles.show&&this.style.setProperty("--anim-open-name",this._animation_styles.show),this._animation_styles.hide&&this.style.setProperty("--anim-close-name",this._animation_styles.hide)}else i=="mode"&&this.mode!="click"&&this.mode!="hover"&&(this.mode="click")}connectedCallback(){super.connectedCallback(),document.addEventListener("click",this._outside_click_event_listener),this.renderRoot.addEventListener("slotchange",o=>{this._slotChangedEvent(o)});let i=this.parentElement,t=1;for(;i;){if(i.tagName=="AALAM-DROPDOWN"){this.mode=="click"&&(i.addEventListener("hide",this._hide_event_listener),this._parent_dd_element=i),t=parseInt(i.style.getPropertyValue("--z-index"))+1;break}i=i.parentElement}this.style.setProperty("--z-index","".concat(t)),this.style.setProperty("--anim-dur","".concat(this.animationDur,"ms")),this.style.setProperty("--pseudo-display","none")}disconnectedCallback(){super.disconnectedCallback(),this.mode==="hover"?(this.removeEventListener("mouseenter",this._handleMouseEnter),this.removeEventListener("mouseleave",this._handleMouseLeave)):this._parent_dd_element&&this._parent_dd_element.removeEventListener("hide",this._hide_event_listener),document.removeEventListener("click",this._outside_click_event_listener),this._cleanup&&(this._cleanup(),this._cleanup=null)}render(){return A(C||(C=k(['\n<slot name="dd-toggler"\n    @click=','>\n</slot>\n<div class="dd-container"\n    @click="','"\n    @animationend=','>\n    <slot name="dd-body"></slot>\n</div>'])),this.mode==="click"?this._toggleDropdown:null,this._bodyClickedEvent,this._animationEnd)}static get styles(){return N(M||(M=k(['\n:host {position: relative;display: inline-block;}\n::slotted([slot="dd-toggler"]) {cursor: pointer;}\n.dd-container {display:none;border: 1px solid #ddd;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    position: absolute;z-index:var(--z-index);width: max-content;}\n:host::before {\n    content: " ";\n    display: var(--pseudo-display, none);\n    position:absolute;\n    background: rgba(0, 0, 0, 0.01);\n    top:calc(var(--pseudo-top) * 1px);\n    height: calc(var(--pseudo-height) * 1px);\n    left: calc(var(--pseudo-left) * 1px);\n    width: calc(var(--pseudo-width) * 1px);\n    clip-path: var(--pseudo-path);\n}\n.anim-open {animation:var(--anim-open-name) var(--anim-dur);\n            display:block !important;transform-origin:var(--anim-open-side)}\n.anim-close {animation:var(--anim-close-name) var(--anim-dur);\n            display:block !important;transform-origin:var(--anim-close-side)}\n\n    @keyframes fade-in {from {opacity:0} to {opacity:1}}\n    @keyframes fade-out {from {opacity:1} to {opacity:0}}\n\n    @keyframes reveal-x {from {transform:scaleX(0)} to {transform:scale(1)}}\n    @keyframes conceal-x {from {transform:scaleX(1)} to {transform:scaleX(0)}}\n\n    @keyframes reveal-y {from {transform:scaleY(0)} to {transform:scaleY(1)}}\n    @keyframes conceal-y {from {transform:scaleY(1)} to {transform:scaleY(0)}}'])))}show(){this._isOpen||(this._isOpen=!0,this._dd_container&&(this._animation_styles.show?this._dd_container.classList.add("anim-open"):this._dd_container.style.display="block"),this.positionDropdown(),this.mode=="hover"&&this.style.setProperty("--pseudo-display","block"),this.dispatchEvent(new Event("show")))}hide(){this.style.setProperty("--pseudo-display","none"),this._isOpen&&(this._isOpen=!1,this._dd_container&&(this._animation_styles.hide&&this._dd_container.classList.add("anim-close"),this._animation_styles.show||(this._dd_container.style.display="none")),this._dd_container.classList.remove("anim-open"),this.dispatchEvent(new Event("hide")))}_slotChangedEvent(i){var e;let t=i.target;if(!t)return;((e=i.target)==null?void 0:e.name)=="dd-toggler"&&this.mode==="hover"&&(t.addEventListener("mouseenter",this._handleMouseEnter.bind(this)),this.addEventListener("mouseleave",this._handleMouseLeave.bind(this)))}_animationEnd(){this._dd_container&&this._dd_container.classList.remove("anim-close")}_bodyClickedEvent(i){this.closesel&&i.target.matches(this.closesel)&&this.hide()}_handleMouseEnter(){this.show()}_checkQuadrants(i,t){let o=[],e=(s,a)=>s<i.left?a<i.top?"q1":"q3":a<i.top?"q2":"q4";return["q3","q2"].indexOf(e(t.left,t.top))>=0&&o.push("tl"),["q1","q4"].indexOf(e(t.right,t.top))>=0&&o.push("tr"),["q1","q4"].indexOf(e(t.left,t.bottom))>=0&&o.push("bl"),["q2","q3"].indexOf(e(t.right,t.bottom))>=0&&o.push("br"),o}_handleMouseLeave(){this.hide()}_handleOutsideClick(i){var o;let t=i.target;if(this._isOpen){for(;t&&t!=this;)t=t.assignedSlot?t.assignedSlot.parentElement?t.assignedSlot.parentElement:t.parentElement:t.parentElement||((o=t.getRootNode())==null?void 0:o.host);t||this.hide()}}_safePolygonFunction(i,t,o){if(!this._dd_container||!this._dd_toggler)return;const e=this._dd_toggler[0].getBoundingClientRect(),s=this._dd_container.getBoundingClientRect(),a=getComputedStyle(this._dd_container);let h=parseInt(a.width),u=parseInt(a.height);if(!i)return;let n={top:i.origin_y=="top"?s.top:s.bottom-u,left:i.origin_x=="left"?s.left:s.right-h,right:i.origin_x=="left"?s.left+h:s.right,bottom:i.origin_y=="top"?s.top+u:s.bottom},p=this._checkQuadrants(e,n);if(p.length==0)return;let v,x,c,m,w=n.left-t,b=n.top-o;p[0][1]==p[1][1]?(v=p[0][1]=="l"?Math.abs(e.left-n.left):Math.abs(e.right-n.right),m=p[0][1]=="l"?e.left-w:t+h):(v=Math.max(e.right,n.right)-Math.min(e.left,n.left),m=Math.min(e.left-w,n.left-w)),p[0][0]==p[1][0]?(c=p[0][0]=="t"?e.top-b:n.bottom-b,x=p[0][0]=="t"?Math.abs(e.top-n.top):Math.abs(e.bottom-n.bottom)):(x=Math.max(e.bottom,n.bottom)-Math.min(e.top,n.top),c=Math.min(e.top-b,n.top-b)),this.style.setProperty("--pseudo-top","".concat(c)),this.style.setProperty("--pseudo-left","".concat(m)),this.style.setProperty("--pseudo-width","".concat(v)),this.style.setProperty("--pseudo-height","".concat(x));const q=(()=>{let g=p[0],y=p[1],r=[[],[]],f=[[],[]];r[0].push(g[1]=="l"?m*-1:m*-1+e.width),r[0].push(g[0]=="t"?c*-1:c*-1+e.height),r[1].push(g[1]=="l"?r[0][0]+(n.left-e.left):r[0][0]+(n.right-e.right)),r[1].push(g[0]=="t"?r[0][1]+(n.top-e.top):r[0][1]+(n.bottom-e.bottom)),g[1]==y[1]?f[0].push(r[1][0]):f[0].push(y[1]=="l"?r[1][0]-h:r[1][0]+h),g[0]==y[0]?f[0].push(r[1][1]):f[0].push(y[1]=="t"?r[1][1]-u:r[1][1]+u),f[1].push(y[1]=="l"?m*-1:m*-1+e.width),f[1].push(y[0]=="t"?c*-1:c*-1+e.height);let P=D=>D.map(E=>"".concat(E[0],"px ").concat(E[1],"px"));return P(r).concat(P(f)).join(",")})();this.style.setProperty("--pseudo-path","polygon(".concat(q,")"))}async positionDropdown(){const i={"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-top":"left-start","left-bottom":"left-end","right-top":"right-start","right-bottom":"right-end",top:"top",bottom:"bottom",left:"left",right:"right"},t=this.boundsel?document.querySelector("".concat(this.boundsel))||this.querySelector('[slot="dd-toggler"]'):this.querySelector('[slot="dd-toggler"]');if(!t)return;const o=[j({mainAxis:this.offset}),z()];this.noflip||o.push(I({fallbackPlacements:["top","bottom","left","right"]})),this._dd_container&&(this._cleanup=Y(t,this._dd_container,()=>{B(t,this._dd_container,{placement:i[this.position]||this.position,middleware:o}).then(e=>{let s=this._setTransOrigin(e.placement),{x:a,y:h}=e;Object.assign(this._dd_container.style,{left:"".concat(a,"px"),top:"".concat(h,"px")}),this.mode=="hover"&&this._safePolygonFunction(s,a,h)})}))}_setTransOrigin(i){const t={"top-start":{origin_x:"left",origin_y:"bottom"},"top-end":{origin_x:"right",origin_y:"bottom"},"bottom-start":{origin_x:"left",origin_y:"top"},"bottom-end":{origin_x:"right",origin_y:"top"},"left-start":{origin_x:"right",origin_y:"top"},"left-end":{origin_x:"right",origin_y:"bottom"},"right-start":{origin_x:"left",origin_y:"top"},"right-end":{origin_x:"left",origin_y:"bottom"},top:{origin_x:"left",origin_y:"bottom"},bottom:{origin_x:"left",origin_y:"top"},left:{origin_x:"right",origin_y:"top"},right:{origin_x:"left",origin_y:"top"}}[i];let o=this._animation_styles;if(t)return o.show&&(o.show.endsWith("x")?this.style.setProperty("--anim-open-side",t.origin_x):o.show.endsWith("y")&&this.style.setProperty("--anim-open-side",t.origin_y)),o.hide&&(o.hide.endsWith("x")?this.style.setProperty("--anim-close-side",t.origin_x):o.hide.endsWith("y")&&this.style.setProperty("--anim-close-side",t.origin_y)),t}};d([_({type:String})],l.prototype,"animation",2);d([_({type:Number})],l.prototype,"animationDur",2);d([_({type:String})],l.prototype,"closesel",2);d([_({type:String})],l.prototype,"boundsel",2);d([_({type:String})],l.prototype,"mode",2);d([_({type:String})],l.prototype,"position",2);d([_({type:Boolean})],l.prototype,"noflip",2);d([_({type:Number})],l.prototype,"offset",2);d([L({slot:"dd-body"})],l.prototype,"_dd_body_slot",2);d([L({slot:"dd-toggler"})],l.prototype,"_dd_toggler",2);d([R(".dd-container")],l.prototype,"_dd_container",2);l=d([S("aalam-dropdown")],l);export{U as __vite_legacy_guard};
